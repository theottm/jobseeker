% Created 2018-10-05 ven. 17:39
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{teddd}
\date{\today}
\title{}
\hypersetup{
 pdfauthor={teddd},
 pdftitle={},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 26.1 (Org mode 9.1.9)}, 
 pdflang={English}}
\begin{document}

\tableofcontents

\section{Explorer}
\label{sec:org60d7d67}
Proper program.
\subsection{Imports}
\label{sec:org68087d8}
\subsubsection{ipython}
\label{sec:orgb3733d1}
\begin{verbatim}
%matplotlib inline
import matplotlib.pyplot as plt
import numpy as np
\end{verbatim}
\subsubsection{pandas}
\label{sec:orgf814322}
\begin{verbatim}
import pandas as pd    
\end{verbatim}

\subsection{Data load}
\label{sec:org42a236d}
\subsubsection{load everything}
\label{sec:org2d6df79}
\begin{enumerate}
\item file list with path
\label{sec:org4930762}
\begin{verbatim}
import os
csv_files = []
date = "2018-09-30"
for dirpath, dirs, files in os.walk("../data/raw/" + date): 
  for filename in files:
    fname = os.path.join(dirpath,filename)
    if fname.endswith('.csv'):
      csv_files.append(fname)
\end{verbatim}
\item dataframe creation
\label{sec:orgd3123c3}
\begin{verbatim}
jobs = pd.DataFrame()

for fl in csv_files:
    print(fl+(30-len(fl)//2)*" *")
    try:
	jobs_set = pd.read_csv(fl)
	jobs_set.dropna(axis=0, how='any', subset=["desc"], inplace=True)
	jobs_set.drop_duplicates(subset="desc", inplace=True)            
	try:                                                             
	    jobs.iloc[0,0]                                               
	    jobs = jobs.append(jobs_set)                                 
	except IndexError:                                               
	    jobs = jobs_set                                              
    except pd.errors.EmptyDataError:
	pass
\end{verbatim}

\item {\bfseries\sffamily TODO} time range selection
\label{sec:orga67fd7a}
\end{enumerate}
\subsubsection{rename}
\label{sec:orgdeb5e15}
use to quickly reset original df
\begin{verbatim}
df = jobs
\end{verbatim}

\subsubsection{python example\hfill{}\textsc{test}}
\label{sec:org0c431f9}
\begin{verbatim}
x = 12
return x
\end{verbatim}

\begin{verbatim}
return int(x)+1
\end{verbatim}

\subsubsection{org doc elisp example\hfill{}\textsc{test}}
\label{sec:org7e6ef07}
\begin{center}
\label{tab:orgab82199}
\begin{tabular}{r}
1\\
2\\
3\\
4\\
\end{tabular}
\end{center}

\subsubsection{python\hfill{}\textsc{python}}
\label{sec:org73176e5}
\begin{verbatim}
"~/data/projects/jobseeker/data/raw/18-09-07/dsp.csv"
\end{verbatim}

\begin{verbatim}
"~/data/projects/jobseeker/data/raw/18-09-07/dsp.csv"
\end{verbatim}

\begin{verbatim}
"~/data/projects/jobseeker/data/raw/18-09-07/python.csv"
\end{verbatim}

\begin{verbatim}
"~/data/projects/jobseeker/data/raw/18-09-07/data scientist.csv"
\end{verbatim}

\begin{verbatim}
"~/data/projects/jobseeker/data/raw/18-09-07/software engineer.csv"
\end{verbatim}
\subsection{Cleansing / Formating\hfill{}\textsc{clean}}
\label{sec:org622b296}
\subsubsection{duplicates}
\label{sec:org6b51386}
\begin{enumerate}
\item drop\(_{\text{duplicates}}\)
\label{sec:orge8b194f}
\begin{verbatim}
df.drop_duplicates(subset="desc", inplace=True)
\end{verbatim}

\item count
\label{sec:orgf5405ab}
\begin{verbatim}
df.title.count()
\end{verbatim}
\end{enumerate}

\subsubsection{olders}
\label{sec:orgef73d9b}
\begin{enumerate}
\item map lambda\hfill{}\textsc{test}
\label{sec:org3d79cd2}
\begin{verbatim}
df = df[df.days_ago.str.contains("30+").map(lambda x: not x)]
\end{verbatim}

\item ==False
\label{sec:orgea15944}
\begin{verbatim}
df = df[df.days_ago.str.contains("30+")==False]
\end{verbatim}

\item count
\label{sec:org4bdcd5f}
\begin{verbatim}
len(df)
\end{verbatim}
\end{enumerate}

\subsubsection{string numbers to integers}
\label{sec:orgda15a88}
\begin{verbatim}
df["days_ago"] = df.days_ago.apply(lambda x: int(x))
\end{verbatim}
\subsubsection{drop erratic values}
\label{sec:orgb817458}
\begin{enumerate}
\item run
\label{sec:org055cea9}
\begin{verbatim}
df = df[df.days_ago.lt(30)]
\end{verbatim}
\item tests
\label{sec:org1a8085d}
\begin{verbatim}
df.days_ago.lt(30)
\end{verbatim}
\end{enumerate}
\subsubsection{rename}
\label{sec:org85be0fa}
\begin{verbatim}
df_clean = df
\end{verbatim}

\subsection{Filtering}
\label{sec:orgfcffccc}
\subsubsection{Look for 1 keywords}
\label{sec:org3821769}
\begin{enumerate}
\item keyword definiton
\label{sec:orgc53f295}
\begin{enumerate}
\item org variable
\label{sec:orgbdd6316}
\begin{verbatim}
"kunst und medien"
\end{verbatim}
\end{enumerate}

\item look in title
\label{sec:orgc8497ef}
\begin{enumerate}
\item boolean serie construction\hfill{}\textsc{test}
\label{sec:orgab64383}
\begin{verbatim}
df.title.str.contains(k, case=False)
\end{verbatim}

\item reduction of our dataset
\label{sec:orgafbeaf0}
\begin{verbatim}
df = df[df.title.str.contains(k, case=False, na=False)]
\end{verbatim}
\end{enumerate}

\item look in description
\label{sec:org9371280}
\begin{verbatim}
df = df[df.desc.str.contains(k, case=False, na=False)]
\end{verbatim}

\item {\bfseries\sffamily TODO} test
\label{sec:org5c4155e}
goto Johnny Kitchin
\begin{verbatim}
k
\end{verbatim}
\end{enumerate}
\subsubsection{Queries}
\label{sec:org786efe9}
\begin{enumerate}
\item get queries metadata
\label{sec:orgc5f46d8}
\begin{enumerate}
\item dataframe using os results
\label{sec:orgd72c48a}
\begin{verbatim}
import os
queries_name = []
queries_size = []
queries_path = []
queries_time = []
for dirpath, dirs, files in os.walk("../data/raw"): 
  for filename in files:
    if filename.endswith('.csv'):

      path = os.path.join(dirpath, filename)
      queries_path.append(path)

      size = os.path.getsize(path)
      queries_size.append(size)

      fname = filename.replace(".csv", "")
      queries_name.append(fname)

      time = os.path.getmtime(path)
      queries_time.append(time)

queries = pd.DataFrame({"name" : queries_name, "path" : queries_path, "size" : queries_size, "time" : queries_time})      
\end{verbatim}
\item remove oldests results
\label{sec:orgcf1382c}
\begin{enumerate}
\item datetime time format
\label{sec:org3f01de2}
\begin{verbatim}
from datetime import datetime
queries["time"] = queries.time.apply(datetime.fromtimestamp)
\end{verbatim}

\item y-m-d format time
\label{sec:orge9b0b21}
\begin{verbatim}
def format_time(x):
    y = x.strftime("%Y-%m-%d")
    return y

queries["time_formated"] = queries.time.apply(format_time)
\end{verbatim}
\end{enumerate}
\item remove null size results
\label{sec:orge33b0ab}
\begin{verbatim}
queries_null = queries[queries["size"] < 1]
queries = queries[queries["size"] > 1]
\end{verbatim}
\item number of entries in csv file
\label{sec:orgb1c7557}
\begin{enumerate}
\item read as pandas dataframe
\label{sec:org6f531de}
\begin{verbatim}
def entries_count(csv):
    return len(pd.read_csv(csv))

queries["entries"] = queries.path.apply(entries_count)
\end{verbatim}
\end{enumerate}

\item inspection
\label{sec:orgb47c0a0}
\begin{verbatim}
import humanize
queries["size_for_humans"] = queries["size"].apply(humanize.naturalsize)
queries.sort_values("size", ascending=False)[["name", "size_for_humans", "entries"]].reset_index()
\end{verbatim}

\item time evolution
\label{sec:orgd6d7736}
\item return list for next scraper launch
\label{sec:org1a7dc62}
\begin{enumerate}
\item remove null size results before (or not)
\label{sec:org2702d8a}
\begin{verbatim}
queries_list = list(set(queries.name))
\end{verbatim}
\item save in a file for editing
\label{sec:orge343e36}
\begin{verbatim}
with open("/queries/queries.txt", "w") as f:
    for query in queries_list:
	f.write(query + "\n")
\end{verbatim}
\end{enumerate}
\end{enumerate}
\item launch scraper with the list
\label{sec:org72f4e7f}
\begin{enumerate}
\item get list from file
\label{sec:org3de758e}
\begin{verbatim}
with open("queries/best.txt", "r") as f:
    queries_selected = f.read()
    queries_selected = queries_selected.splitlines()
\end{verbatim}

\item run shell script as subprocess
\label{sec:org48e3984}
\begin{enumerate}
\item variables and imports
\label{sec:org928346d}
\begin{verbatim}
import subprocess
from subprocess import Popen, PIPE
import shlex

cwd = '/home/teddd/data/projects/jobseeker/data/external/indeed/'
bash_script = [cwd + 'local_crawler_launch.sh']
arguments = queries_selected
command = bash_script + arguments
\end{verbatim}

\item execution
\label{sec:orge18a6a6}
\begin{enumerate}
\item stdout to buffer
\label{sec:org2ce2d87}
\begin{verbatim}
session = subprocess.Popen(command, stdout=PIPE, stderr=PIPE)
stdout, stderr = session.communicate()

if stderr:
    raise Exception("Error "+str(stderr))

stdout
\end{verbatim}

\item stdout to file
\label{sec:org66f6069}
\begin{verbatim}
from datetime import datetime
date = str(datetime.now())
with open("../data/external/crawl-log-" + date + ".txt",'w') as temp_file:
    crawl = subprocess.Popen(command, stdout=temp_file, cwd=cwd)
\end{verbatim}
\end{enumerate}
\end{enumerate}
\end{enumerate}
\end{enumerate}
\subsubsection{Look for multiple keywords}
\label{sec:orgaa2ed6e}
\begin{enumerate}
\item tool: keywords list
\label{sec:org683d9e5}
use results from Queries
\item reduce dataframe
\label{sec:org29a27ae}
\begin{enumerate}
\item boolean serie
\label{sec:orga60c44d}
\begin{verbatim}
df_bool = pd.DataFrame()
for query in queries_selected:
    df_bool[query] = df.desc.str.contains(query)
\end{verbatim}

\item binary serie
\label{sec:org1b67522}
\begin{verbatim}
def bool_to_bin(x):
    if x is True:
	return 1
    else:
	return 0

df_bin = pd.DataFrame()

for query in queries_selected:
    df_bin[query] = df_bool[query].apply(bool_to_bin)
\end{verbatim}

\item score attribution
\label{sec:org454e4c6}

\begin{enumerate}
\item overview
\label{sec:org9571990}
\begin{verbatim}
pd.concat({"title":df.title, "score":df_bin.sum(axis=1)}, axis=1).sort_values("score", ascending=False)
\end{verbatim}

\item reduce dataframe for visual exploration
\label{sec:orgedde591}
\begin{verbatim}
df_print = df
df_print["score"] = df_bin.sum(axis=1)
df_print = df_print.sort_values("score", ascending=False)
\end{verbatim}
\end{enumerate}
\end{enumerate}

\item guide: used words
\label{sec:org2f64c5c}
\begin{enumerate}
\item amongst keywords
\label{sec:org0068f76}
\begin{verbatim}
df_bin.sum().sort_values(ascending=False)
\end{verbatim}
\end{enumerate}

\item which contains most of the querie keywords ?
\label{sec:org6a8109b}
\item add weight to keywords ?
\label{sec:orga82bb86}
\item keywords distance map
\label{sec:org74e0c6c}
with all keywords, you are at the center
\end{enumerate}
\subsubsection{companies}
\label{sec:org7878e59}
\begin{verbatim}
df = df[df.company.str.contains("berlin", case=False, na=False)]
\end{verbatim}
\subsection{Stats}
\label{sec:orgbd19f4c}
\subsubsection{overview}
\label{sec:org4700964}
\begin{enumerate}
\item head
\label{sec:org2c5e1a9}
\begin{verbatim}
df.head()
\end{verbatim}

\item count
\label{sec:orgafb7bdd}
\begin{verbatim}
len(df)
\end{verbatim}
\end{enumerate}

\subsubsection{days ago}
\label{sec:org951a2cb}
\begin{enumerate}
\item histogram
\label{sec:orgbfe398c}
\begin{enumerate}
\item pd plot
\label{sec:orgea18809}
\begin{verbatim}
df.days_ago.plot.hist()
\end{verbatim}
\end{enumerate}
\item value count
\label{sec:org0aace72}
\begin{verbatim}
df.days_ago.value_counts()
\end{verbatim}
\item groupby
\label{sec:org54017ed}
\begin{enumerate}
\item basic output
\label{sec:org2d28748}
\begin{verbatim}
df.groupby(["days_ago"]).groups
\end{verbatim}
\item loop print
\label{sec:org6e66ad8}
\begin{verbatim}
grouped = df.groupby("days_ago")

for name,group in grouped:
    print(name)
    print(group)
\end{verbatim}
\end{enumerate}
\end{enumerate}
\subsection{Printing}
\label{sec:org583de4c}
\subsubsection{quick overview}
\label{sec:org6941a7a}
\begin{enumerate}
\item head
\label{sec:org3ff91e6}
\begin{verbatim}
df.head()
\end{verbatim}

\item count
\label{sec:orgade2ad0}
\begin{verbatim}
df.title.count()
\end{verbatim}
\item titles
\label{sec:org846be09}
\begin{verbatim}
df.title
\end{verbatim}
\end{enumerate}

\subsubsection{html pages}
\label{sec:org46ffa8f}
\begin{enumerate}
\item hacked around solution\hfill{}\textsc{test}
\label{sec:org2b8d5c6}
\begin{enumerate}
\item function to save results to html
\label{sec:orge7554f5}
\begin{verbatim}
from datetime import datetime
from os import mkdir

def htmlexport(df, begin, end):
	    date = str(datetime.now())
	    path = "../reports/html/" + date + "/"
	    mkdir(path)
	    for i in range(begin, end):
			html = ""
			html = html + "\n"
			html = html + "Job number " + str(i)
			html = html + "\n"
			html = html + "-"*100
			html = html + "\n" + df.title.iloc[i]
			html = html + "\n"
			html = html + df.company.iloc[i]
			html = html + "\n"
			html = html + "-"*100
			html = html + "\n"
			html = html + df.desc.iloc[i]
			html = html + "\n"*3
			html = html + "-"*100
			html = html + "\n"*3
			filename = path + "job-" + str(i) + ".html"
			with open(filename, "a") as file:
				    file.write(html)
\end{verbatim}

\item call function
\label{sec:orgbfc9442}
\begin{verbatim}
htmlexport(dfk, 0, dfk.title.count())
\end{verbatim}
\item PB : imossible to add links because of some encoding pb
\label{sec:org578f566}
\end{enumerate}
\item use xml.dom\hfill{}\textsc{test}
\label{sec:org87b5fa2}
\begin{enumerate}
\item use
\label{sec:orge49e067}
\begin{verbatim}
from xml.dom import minidom
minidom.parseString(dfk.desc.iloc[10])
\end{verbatim}

\item PB : some descs are separated by comas
\label{sec:org92c00e8}
\begin{enumerate}
\item change spider
\label{sec:orgb898115}
\item use regexp to parse again
\label{sec:org302eac3}
\item test with proper html files : maybe it is just not working with html ?
\label{sec:org3326746}
\begin{verbatim}
from xml.dom import minidom
minidom.parseString("~/code/web/plasma-city/application/static/front.html")
\end{verbatim}
\end{enumerate}
\end{enumerate}

\item use yattag
\label{sec:org0ee0b7c}
\begin{enumerate}
\item imports
\label{sec:org9d4d9f7}
\begin{verbatim}
from datetime import datetime
from os import mkdir
from yattag import Doc
\end{verbatim}

\item html page generation
\label{sec:org9ce33dd}
\begin{enumerate}
\item functions definition
\label{sec:org1113985}
\begin{verbatim}
def linksgen(filename_base, pagenum, url):
    doc, tag, text = Doc().tagtext()

    with tag("div"):
	with tag('a', href = "."):
	    text('Home page')
	with tag("div"):
	    with tag("a", href = filename_base + str(pagenum - 1) + ".html"):
		text("Previous page")
	    text(" ")
	    with tag("a", href = filename_base + str(pagenum + 1) + ".html"):
		text("Next page")
	with tag("a", href = url, target="_blank"):
	    text("Original page")

    return doc.getvalue()


def pagegen(filename_base, pagenum, title, desc, company, days, url):
    doc, tag, text = Doc().tagtext()

    doc.asis('<meta charset="UTF-8">')
    with tag("title"):
	text(title)
    with tag("body"):
	doc.asis(linksgen(filename_base, pagenum, url))
	with tag("h1"):
	    text(title)
	with tag("h2"):
	    text(company)
	with tag("p"):
	    text(str(days) + " days ago")
	with tag("div"):
	    doc.asis(desc)
	doc.asis(linksgen(filename_base, pagenum, url))

    return doc.getvalue()
\end{verbatim}

\item test pagegen\hfill{}\textsc{test}
\label{sec:orgfdc460d}
\begin{verbatim}
pagegen("nom", 0, "titre", "desc", "firm", "days", "www")
\end{verbatim}

\item test linksgen\hfill{}\textsc{test}
\label{sec:org34e6aae}
\begin{verbatim}
linksgen("file", 10, "wwwww")
\end{verbatim}
\end{enumerate}
\item htmlexport function
\label{sec:orgbba83af}
\begin{enumerate}
\item definition
\label{sec:org5707527}
\begin{verbatim}
def htmlexport(df, begin, end):
    date = str(datetime.now())
    path = "../reports/html/" + date + "/"
    mkdir(path)
    for i in range(begin, end):
	filename_base = "job-"
	html = pagegen(filename_base,
		       i,
		       df.title.iloc[i],
		       df.desc.iloc[i],
		       df.company.iloc[i],
		       df.days_ago.iloc[i],
		       df.url.iloc[i]
	)
	filename = path + filename_base +  str(i) + ".html"
	with open(filename, "a") as file:
	    file.write(html)

\end{verbatim}

\item call
\label{sec:org5e1d97c}
\begin{verbatim}
htmlexport(df_print, 0, 40)
\end{verbatim}

\item link
\label{sec:org8b4a05f}
\url{home/teddd/data/projects/jobseeker/reports/html/}
\end{enumerate}
\end{enumerate}
\end{enumerate}
\subsubsection{server}
\label{sec:orge555d4b}
\begin{enumerate}
\item flask ? :D !!!
\label{sec:org054f815}
\end{enumerate}
\subsubsection{org  table (python)\hfill{}\textsc{python}}
\label{sec:org968c930}
\begin{enumerate}
\item john kitchin example\hfill{}\textsc{test}
\label{sec:org761b777}
\begin{verbatim}
import pandas as pd
test = pd.DataFrame({'A': [1000, 1000], 'B' : [60, 100]})
test2 = [list(test)] + [None] + test.values.tolist()
test3 = test.values.tolist()
return (test, test2, test3)
\end{verbatim}

\item my program\hfill{}\textsc{slow}
\label{sec:orge6c64c9}
\begin{verbatim}
import pandas as pd
df = pd.read_csv(data)
return  [list(df)] + [None] + df.values.tolist()
\end{verbatim}
\end{enumerate}

\subsubsection{org results: html\hfill{}\textsc{test}}
\label{sec:org37a9d13}
\begin{verbatim}
dfk.desc.iloc[0]
\end{verbatim}

\subsubsection{soupprint}
\label{sec:orge1f7a82}
\begin{enumerate}
\item session functions
\label{sec:org1206568}
\begin{enumerate}
\item souper (using get text)
\label{sec:org5942cc6}
\begin{verbatim}
from bs4 import BeautifulSoup

def souper(html):
    "returns only the text from a html string"
    soup = BeautifulSoup(html, 'html.parser')
    return soup.get_text()
\end{verbatim}
\item soupprint
\label{sec:org2ffefe5}
\begin{enumerate}
\item definition
\label{sec:org7bfdb6b}
\begin{verbatim}
from bs4 import BeautifulSoup

def souper(html):
    soup = BeautifulSoup(html, 'html.parser')
    print(soup.get_text())

def soupprint(df, begin, end):
    for i in range(begin, end):
	print(i, df.title.iloc[i])
	print("\n")
	print(df.company.iloc[i])
	print("\n")
	souper(df.desc.iloc[i])
	print("\n"*3)
	print("-"*100)
	print("\n"*3)
\end{verbatim}
\item call
\label{sec:org50f556c}
\begin{verbatim}
soupprint(df, 0, 10)
\end{verbatim}
\end{enumerate}
\end{enumerate}

\item soupprint as org function
\label{sec:org54be24e}
\begin{enumerate}
\item definition
\label{sec:org0cc5a6d}
\begin{verbatim}
from bs4 import BeautifulSoup

def souper(html):
    soup = BeautifulSoup(html, 'html.parser')
    print(soup.get_text())

def soupprint(df, begin, end):
    for i in range(begin, end):
	print(i, df.title.iloc[i])
	print("\n")
	print(df.company.iloc[i])
	print("\n")
	souper(df.desc.iloc[i])
	print("\n"*3)
	print("-"*100)
	print("\n"*3)
\end{verbatim}

\item call
\label{sec:org04d78bc}
\begin{verbatim}
soupprint(dfk, 0, dfk.title.count())
\end{verbatim}
\end{enumerate}
\end{enumerate}
\section{External Documentation}
\label{sec:org5f715ff}
\subsection{doc : look for matching patern\hfill{}\textsc{doc}}
\label{sec:org8f7419f}
\begin{verbatim}
help(df.title.str.contains)
\end{verbatim}

\subsection{pandas}
\label{sec:orgddfcd81}
\href{file:///home/teddd/Cours/Data/cheat-sheets/Pandas\_Cheat\_Sheet.pdf}{Pandas cheat sheet}
\section{Tests}
\label{sec:org9e1bc7d}
\subsection{ob-ipython}
\label{sec:orgd42efab}
\subsubsection{hands-on tryout}
\label{sec:orgf05595b}
\begin{enumerate}
\item hello world
\label{sec:org5ff9fa4}
\begin{verbatim}
print 'hello world'
\end{verbatim}
\item function definition
\label{sec:org3b3c914}
\begin{verbatim}
def fn():
    print "I am in the session !"
\end{verbatim}

\item function call
\label{sec:orgc553fae}
\begin{verbatim}
fn()
\end{verbatim}
\end{enumerate}

\subsubsection{doc tutorial}
\label{sec:org09f9b82}
\begin{enumerate}
\item imports
\label{sec:orga43292f}
\begin{verbatim}
%matplotlib inline
import matplotlib.pyplot as plt
import numpy as np
\end{verbatim}

\item ex2
\label{sec:orgf063e3a}
\begin{verbatim}
def foo(x):
    return x + 9

[foo(x) + 7 for x in range(7)]
\end{verbatim}

\item images
\label{sec:org7973da4}
\begin{enumerate}
\item ex1
\label{sec:org6d487d3}
\begin{verbatim}
plt.hist(np.random.randn(20000), bins=200)
\end{verbatim}

\item ex2
\label{sec:org9ebcf5b}
\begin{verbatim}
plt.hist(np.random.randn(20000), bins=200)
\end{verbatim}

\item config
\label{sec:orgaf18337}
\begin{verbatim}
%config InlineBackend.figure_format = 'svg'
\end{verbatim}
\end{enumerate}

\item other kernel
\label{sec:orga816da3}
\begin{verbatim}
(+ 1 2)
\end{verbatim}

\item async
\label{sec:orgba7a787}
\begin{verbatim}
import time
time.sleep(3)
plt.hist(np.random.randn(20000), bins=200)
\end{verbatim}
\end{enumerate}

\subsubsection{other tryouts}
\label{sec:org1142b13}
\begin{enumerate}
\item functions
\label{sec:org3d37983}
\begin{enumerate}
\item call
\label{sec:org84ed862}
\begin{verbatim}
lol()
\end{verbatim}
\end{enumerate}

\item formater
\label{sec:org7dcd8e2}
\begin{enumerate}
\item init
\label{sec:orgfc49b9d}
\begin{verbatim}
import IPython
from tabulate import tabulate

class OrgFormatter(IPython.core.formatters.BaseFormatter):
    def __call__(self, obj):
	try:
	    return tabulate(obj, headers='keys',
			    tablefmt='orgtbl', showindex='always')
	except:
	    return None

ip = get_ipython()
ip.display_formatter.formatters['text/org'] = OrgFormatter()
\end{verbatim}
\item arrays
\label{sec:org798bba6}
\end{enumerate}

\item kernel tests
\label{sec:org8a7dc28}
\begin{enumerate}
\item session header arg after run console
\label{sec:orgdad64e8}
\begin{verbatim}
print("hello")
\end{verbatim}
\item kernel headerarg
\label{sec:orge023430}
\begin{verbatim}
print("hello")
\end{verbatim}
\end{enumerate}
\end{enumerate}
\subsection{nltk}
\label{sec:org7d65765}
\subsubsection{text selection}
\label{sec:org47540c3}
\begin{enumerate}
\item sample text base
\label{sec:org20e381b}
\begin{verbatim}
from nltk.book import *
\end{verbatim}
\item access text as string
\label{sec:orgecabd35}
\begin{enumerate}
\item imports
\label{sec:orga98fb27}
\begin{verbatim}
import nltk, re, pprint
from nltk import word_tokenize
\end{verbatim}
\item with one description
\label{sec:orgc97554d}
\begin{enumerate}
\item definition
\label{sec:orgc267e96}
\begin{verbatim}
string = df.iloc[0].desc
\end{verbatim}

\item formating
\label{sec:org56300d8}
\begin{enumerate}
\item html
\label{sec:org8acab07}
\begin{verbatim}
string = souper(string)
\end{verbatim}

\item case
\label{sec:org8825d46}
\begin{verbatim}
string = string.lower()
\end{verbatim}

\item punctiations
\label{sec:org6dc4ba2}

\begin{enumerate}
\item definition
\label{sec:org799a504}
\begin{verbatim}
def multi_replace(string, *args, replace=" "):
    for target in args:
	string = string.replace(target, replace)
    return string

trash_car = (",", "\'", "\"", "&", "#", "{", "}",
	     "(", ")", "[", "]", "_", "\\", "~", "-",
	     ",", ";", ":", ".", "?", "!", "+", "|",
	     "@", "/", "–", "*", "“", "„", "%", " ",
	     "€")

\end{verbatim}

\item call
\label{sec:org4ed0c9f}
\begin{verbatim}
string = multi_replace(string, *trash_car)
\end{verbatim}
\end{enumerate}
\end{enumerate}
\end{enumerate}


\item to ntlk text object
\label{sec:orgf0eb58e}
\begin{enumerate}
\item tokenizing
\label{sec:orgbd0ebcc}
\begin{verbatim}
tokens = word_tokenize(string)
\end{verbatim}

\item use as nltk text
\label{sec:org12f2b6e}
\begin{verbatim}
text = nltk.Text(tokens)
\end{verbatim}
\end{enumerate}
\end{enumerate}
\end{enumerate}
\subsubsection{search}
\label{sec:org6da83f8}
\begin{enumerate}
\item concordance
\label{sec:orgc2acf44}
\begin{verbatim}
text.concordance("data")
\end{verbatim}
\item similar word
\label{sec:org351d6ba}
\begin{verbatim}
text.similar("analyst")
\end{verbatim}
\item dispersion
\label{sec:orgce88d4f}
\begin{verbatim}
text.dispersion_plot(["up", "with", "in", "the", "for", "team"])
\end{verbatim}
\end{enumerate}
\subsubsection{generation\hfill{}\textsc{test}}
\label{sec:org0108c10}
\begin{verbatim}
text.generate(["The", "job", "is", "for", "data", "team"])
\end{verbatim}

\subsubsection{normalizing}
\label{sec:orgbb0b3ab}
\begin{enumerate}
\item steaming
\label{sec:orgc59f17e}
\item lemmatization
\label{sec:org188e143}
\end{enumerate}
\subsubsection{vocabulary}
\label{sec:orgaf2d09a}
\begin{enumerate}
\item sorted set
\label{sec:orga50a113}
\begin{verbatim}
sorted(set(text))
\end{verbatim}
\item lexical richness
\label{sec:orge2266c6}
\begin{enumerate}
\item tryout
\label{sec:org6c83d74}
\begin{verbatim}
len(text) / len(set(text))
\end{verbatim}

\item function
\label{sec:org8f10f8c}
\begin{verbatim}
def lexical_diversity(text):
    return len(text) / len(set(text))
\end{verbatim}
\end{enumerate}
\item specific word
\label{sec:orgf69a6d4}
\begin{enumerate}
\item tryout
\label{sec:org0aa45a4}
\begin{verbatim}
100 * text.count('for') / len(text)
\end{verbatim}
\item functyion
\label{sec:org7f585d8}
\begin{verbatim}
def word_percentage(word):
    return 100 * text.count(word) / len(text)
\end{verbatim}
\end{enumerate}
\end{enumerate}

\subsubsection{{\bfseries\sffamily TODO} Build a corpus !}
\label{sec:orgc2e650f}

\begin{enumerate}
\item sklearn
\label{sec:org8dc0f77}
\begin{verbatim}
docs = df['desc']

tfs = tfidf.fit_transform(docs)
\end{verbatim}
\end{enumerate}
\end{document}
